<!DOCTYPE html>

<html lang="pt-br">

<head>
	<title> Exercicio orientacao a Objetos com JavaScript com classes</title>
	<meta charset="utf-8">	

	<style>
		body {
			font-family: Arial;
		}

		label {
			display: inline-block;
			width: 150px;
			margin: 2px;
		}

		fieldset {
			display: inline-block;
		}

		th {
			background-color: black;
			color: white;
		}

		#datanasc,
		#dataadmissao {
			width: 10em;
		}

		td {
			text-align: center;
			
		}

		td:last-child {
			text-align: center;
			color: red;
			cursor: pointer;
		}
	</style>


</head>



<body>
	<form name="formulario" id="formulario">
		<fieldset>
			<legend>Cadastro de Funcionário</legend>
			<label for="nome">Nome:</label> <input type="text" id="nome"><br>
			<label for="datanasc">Data de Nascimento:</label> <input type="text" id="datanasc"
				placeholder="dd/mm/aaaa"><br>
			<label for="dataadmissao">Data de Admissão:</label> <input type="text" placeholder="dd/mm/aaaa"
				id="dataadmissao"><br>
			<input type="button" onclick="return capturar()" id="btcadastrar" onclick="imprimir()" value="Cadastrar">
		</fieldset>
	</form>
	<table id="funcionarios">
		<thead>
			<tr>
				<th>Nome</th>
				<th>Data de Nascimento</th>
				<th>Data de Admissão</th>
				<th>Excluir</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td id="nomeInformado"></td>
				<td id="dataNascInformada"></td>
				<td id="dataAdmissaoInformada"></td>
				<td onclick="limpar()">excluir</td>
			</tr>
		</tbody>
	</table>
	<br>	
	<p id="valores1"></p>
	<p id="valores2"></p>
	<p id="valores3"></p>
	<p id="valores4"></p>
	
	<script>		


		class Pessoa {
			#nome = "";
			#dataNascimento;

			constructor() {

			}

			set nome(value) {
				this.#nome = value;
			}

			get nome() {
				return this.#nome;
			}

			set dataNascimento(value) {
				this.#dataNascimento = value;
			}

			get dataNascimento() {
				return this.#dataNascimento;
			}

			idade(dataNascimento) {
				
				var agora = new Date();
				var hoje = new Date(agora.getYear(), agora.getMonth, agora.getDate());

				var anoAgora = agora.getYear();
				var mesAgora = agora.getMonth();
				var diaAgora = agora.getDate();
				
			
				var dataNascimento = new Date(dataNascimento.substr(6,4),dataNascimento.substr(3,2)-1,dataNascimento.substr(0,2));				
				var anoNascimento = dataNascimento.getYear();
				var mesNascimento = dataNascimento.getMonth();
				var diaNascimento = dataNascimento.getDate();

				var anoIdade = anoAgora - anoNascimento;
				//console.log(anoIdade);

				if(mesAgora >= mesNascimento) {
					var mesIdade = mesAgora - mesNascimento;
				} else {
					anoIdade = anoIdade -1;
					var mesIdade = (mesAgora - mesNascimento) +12;
				}
				if(diaAgora >= diaNascimento) {
					var diaIdade = diaAgora - diaNascimento;
				} else {
					mesIdade = mesIdade -1;
					diaIdade = (diaAgora - diaNascimento) + 31;
					if (mesIdade <0) {
						mesIdade = 11;
						anoIdade = anoIdade-1;
					}
					
				}
				//console.log(anoIdade);
				return anoIdade;				
			}

		}

		class Funcionario extends Pessoa {
			#dataAdmissao;

			constructor() {
				super();
			}

			set dataAdmissao(value) {
				this.#dataAdmissao = value;
			}

			get dataAdmissao() {
				return this.#dataAdmissao;
			}

			tempoServico() {
				var tempo = 25
				return tempo;

			}
		}

		var nomeX = "";
		var dataNascimentoX = "";
		var dataAdmissaoX = "";

		var funcionario1 = new Funcionario();

		function capturar() {

			nome = document.getElementById('nome').value;
			document.getElementById('nomeInformado').innerHTML = nome;

			dataNascimento = document.getElementById('datanasc').value;
			document.getElementById('dataNascInformada').innerHTML = dataNascimento;

			dataAdmissao = document.getElementById('dataadmissao').value;
			document.getElementById('dataAdmissaoInformada').innerHTML = dataAdmissao;

			funcionario1.nome = document.forms["formulario"].elements[1].value;			
			funcionario1.dataNascimento = document.forms["formulario"].elements[2].value;
			funcionario1.dataAdmissao = document.forms["formulario"].elements[3].value;

			document.getElementById("valores1").innerHTML = "nome: " + funcionario1.nome;
			document.getElementById("valores2").innerHTML = "Data de Nascimento: " + funcionario1.dataNascimento;
			document.getElementById("valores3").innerHTML = "Data de Admissão: " + funcionario1.dataAdmissao;
			
			var dia = dataNascimento.substr(0,2);
			var mes = dataNascimento.substr(3,2);
			var ano = dataNascimento.substr(6,4);
			//var dataNascimentoFormatada = new Date(ano,mes-1,dia);
			console.log(dia);
			console.log(mes);
			console.log(ano);
			document.getElementById("valores4").innerHTML = "Idade: " + funcionario1.idade(dataNascimento);
		

			return true;

		}

		function limpar() {

			var nome = null;
			document.getElementById('nomeInformado').innerHTML = nomeX;
			var dataNascimento = null;
			document.getElementById('dataNascInformada').innerHTML = dataNascimento;
			var dataAdmissao = null;
			document.getElementById('dataAdmissaoInformada').innerHTML = dataAdmissao;
			document.getElementById("valores1").innerHTML = null;
			document.getElementById("valores2").innerHTML = null;
			document.getElementById("valores3").innerHTML = null;
			document.getElementById("valores4").innerHTML = null;
			
				
		}

		












	</script>





</body>

</html>